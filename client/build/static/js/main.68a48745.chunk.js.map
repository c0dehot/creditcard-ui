{"version":3,"sources":["components/NavBar.js","components/PaymentPage.js","components/ShoppingCartPage.js","App.js","index.js"],"names":["NavBar","location","useLocation","class","to","className","id","pathname","priorPaymentInfoExists","CreditCardPage","useState","name","number","expiry","cvv","form","setForm","inputClass","setInputClass","a","fetch","then","result","json","apiResult","status","alert","paymentInfo","Date","handleInputChange","e","regex","len","target","value","RegExp","test","substr","luhnCheck","num","slice","split","reverse","map","digit","idx","reduce","t","n","Number","toString","preventDefault","chkForm","length","method","headers","body","JSON","stringify","console","log","useEffect","loadPaymentDetails","for","onChange","type","placeholder","date","minDate","format","onClick","ShoppingCartPage","href","App","exact","path","component","PaymentPage","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.68a48745.chunk.js","sourcesContent":["import React from 'react';\nimport { Link, useLocation } from \"react-router-dom\";\n\nfunction NavBar() {\n    const location = useLocation();\n\n  return ( \n    <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n      <Link to=\"/\" className=\"navbar-brand\">\n        <i class=\"fas fa-shopping-cart\"></i>\n      </Link>\n\n      <div id=\"navbarSupportedContent\">\n        <ul class=\"navbar-nav mr-auto\">\n          <li className=\"nav-item\">\n            <Link to=\"/shoppingcart\" className={location.pathname === \"/productlist\" ? \"nav-link active\" : \"nav-link\"}>\n              Shopping Cart\n            </Link>\n          </li>          \n          <li className=\"nav-item\">\n            <Link to=\"/payment\" className={location.pathname === \"/productadd\" ? \"nav-link active\" : \"nav-link\"}>\n              Payment Details\n            </Link>\n          </li> \n        </ul>\n      </div>\n    </nav>\n  );\n}\n\nexport default NavBar;","import React, { useState, useEffect } from \"react\";\nimport DatePicker from 'react-date-picker';\n\nlet priorPaymentInfoExists = false;\n\nfunction CreditCardPage(){\n    const [ form, setForm ]= useState( { name: '', number: '', expiry: '', cvv: '' } )\n    const [ inputClass, setInputClass ] = useState( { name: '', number: '', expiry: '', cvv: '' } )\n\n    // on component load (ex. componentDidMount)\n    useEffect( function(){\n        loadPaymentDetails();\n    }, [] );\n\n    async function loadPaymentDetails(){\n        const apiResult = await fetch( '/api/payment' ).then( result=>result.json() );\n\n        if( !apiResult.status ){\n            alert( 'Sorry something went wrong' );\n            return;\n        }\n\n        if( !apiResult.paymentInfo.name )\n            return;\n\n        priorPaymentInfoExists = true;\n        \n        // convert date from string to date-object\n        apiResult.paymentInfo.expiry = new Date( apiResult.paymentInfo.expiry );\n        setForm( apiResult.paymentInfo );\n    }\n\n    function handleInputChange( e, regex='', len=0 ){\n        let { id, value } = e.target\n        const validReg = new RegExp(`[^${regex}]+`).test(value)\n        if( regex && new RegExp(`[^${regex}]+`).test(value) )\n            return;\n        // truncate to the length \n        if( len )\n            value = value.substr(0,len);\n            \n        setForm( { ...form, [id]: value } )\n    }\n\n    function updateDate( date ){\n        setForm( { ...form, expiry: date } );\n    }\n\n    async function saveForm(e){\n        e.preventDefault();\n\n        // simple luhn checker (boolean)\n        function luhnCheck( num ){\n            const chkDigit = num.slice(-1);\n            const luhn = num.slice(0,-1).split('').reverse()\n                .map( (digit,idx)=>( idx%2 ? digit : digit*2>9 ? digit*2-9 : digit*2 ) )\n                .reduce( (t,n)=>t+Number(n) )*9;\n            return chkDigit===luhn.toString().slice(-1)\n        }\n            \n        const chkForm = {\n            name: form.name.length>4,\n            number: form.number.length===16 && luhnCheck( form.number ),\n            expiry: form.expiry ? true : false,\n            cvv: form.cvv.length===3\n        }\n        // update input class set\n        setInputClass( {\n            name: chkForm.name ? 'is-valid' : 'is-invalid',\n            number: chkForm.number ? 'is-valid' : 'is-invalid',\n            expiry: chkForm.expiry ? 'is-valid' : 'is-invalid',\n            cvv: chkForm.cvv ? 'is-valid' : 'is-invalid'\n        })\n\n        if( !(chkForm.name && chkForm.number && chkForm.expiry && chkForm.cvv ) )\n            return;\n\n        // save & notify the user\n        const apiResult = await fetch( '/api/payment',\n            {   method: priorPaymentInfoExists ? 'put' : 'post',\n                headers: {\n                    'Accept': 'application/json, text/plain, */*',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(form)\n            }\n            ).then( result=>result.json() );\n\n        if( !apiResult.status ){\n            alert( 'Sorry something went wrong' );\n            return;\n        }\n    \n        console.log( `[saveForm] VALID, saving data: `, form )\n        console.log( `[setFormValid] data: `, chkForm )\n    }\n    return (\n        <div class='container'>\n            <h1>Payment Details</h1>\n            <form>\n                <div class=\"form-group\">\n                    <label for=\"name\">Full Name</label>\n                    <input onChange={(e)=>handleInputChange(e)} value={form.name} className={`form-control ${inputClass.name}`} id=\"name\" type=\"text\" placeholder=\"Jane John Doe\" />\n                    { inputClass.name==='is-invalid' ?\n                    <small id=\"nameHelp\" class=\"text-danger\">\n                        Your name must be at least 4 characters long.\n                    </small> : ''}\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"number\">Credit Card Number</label>\n                    <input onChange={(e)=>handleInputChange(e,'0-9',16)} value={form.number} className={`form-control ${inputClass.number}`} id=\"number\" type=\"text\" placeholder=\"4500 0000 0000 0000\" />\n                    { inputClass.number==='is-invalid' ?\n                    <small id=\"numberHelp\" class=\"text-danger\">\n                        This must be a valid 16 digit credit card number\n                    </small> : ''}\n                </div>\n                <div class=\"form-row\">\n                    <div class=\"form-group col-6\">\n                        <label for=\"cardExpiry\">Expiration</label>\n                        <div className={`form-control ${inputClass.expiry}`}>\n                            <DatePicker onChange={updateDate} value={form.expiry} id=\"expiry\" minDate={new Date()} format='yyyy-MMM' />\n                        </div>\n                        { inputClass.expiry==='is-invalid' ?\n                        <small id=\"numberHelp\" class=\"text-danger\">\n                            Please enter an expiry date!\n                        </small> : ''}\n                    </div>\n                  \n                    <div class=\"form-group col-6\">\n                        <label for=\"ccExpiry\">CVV</label>\n                        <input onChange={(e)=>handleInputChange(e,'0-9',3)} value={form.cvv} className={`form-control ${inputClass.cvv}`} id=\"cvv\" type=\"text\" placeholder=\"999\" />\n                        { inputClass.cvv==='is-invalid' ?\n                         <small id=\"numberHelp\" class=\"text-danger\">\n                            Your number your card's CVV (on the back)\n                        </small> : ''}\n                    </div>\n                                     \n                </div>\n                <button onClick={saveForm} type=\"button\" class=\"btn btn-primary\">Save CC</button>\n            </form>\n        </div>\n    )\n}\n\nexport default CreditCardPage;","import React from \"react\";\n\nfunction ShoppingCartPage(){\n    return (\n        <div>\n              <h1><i class=\"fas fa-shopping-cart fa-2x\"></i> Shopping Cart</h1>\n              \n              <a href='/payment' class=\"btn btn-primary\">Payment Details</a>\n        </div>\n    )\n}\n\nexport default ShoppingCartPage;","import React from 'react';\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n// import { GlobalStore } from \"./components/GlobalStore\";\nimport NavBar from './components/NavBar';\nimport PaymentPage from './components/PaymentPage';\nimport ShoppingCartPage from './components/ShoppingCartPage';\n\nfunction App() {\n  return (\n      <Router>\n      <div className=\"App\">\n          <NavBar />\n          <div class=\"container\">\n            <Route exact path={[\"/\",\"/shoppingcart\"]} component={ShoppingCartPage} />\n            <Route exact path=\"/payment\" component={PaymentPage} />\n            </div>\n      </div>\n      </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}