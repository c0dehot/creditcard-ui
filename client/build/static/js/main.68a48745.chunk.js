(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,a,t){e.exports=t(57)},36:function(e,a,t){},57:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),c=t(15),l=t.n(c),i=(t(36),t(12)),s=t(7);var o=function(){var e=Object(s.e)();return r.a.createElement("nav",{class:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(i.b,{to:"/",className:"navbar-brand"},r.a.createElement("i",{class:"fas fa-shopping-cart"})),r.a.createElement("div",{id:"navbarSupportedContent"},r.a.createElement("ul",{class:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/shoppingcart",className:"/productlist"===e.pathname?"nav-link active":"nav-link"},"Shopping Cart")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/payment",className:"/productadd"===e.pathname?"nav-link active":"nav-link"},"Payment Details")))))},m=t(14),u=t.n(m),p=t(16),v=t(21),d=t(22),b=t(24),f=t(30),y=t.n(f),E=!1;var h=function(){var e=Object(n.useState)({name:"",number:"",expiry:"",cvv:""}),a=Object(b.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)({name:"",number:"",expiry:"",cvv:""}),i=Object(b.a)(l,2),s=i[0],o=i[1];function m(){return(m=Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/payment").then((function(e){return e.json()}));case 2:if((a=e.sent).status){e.next=6;break}return alert("Sorry something went wrong"),e.abrupt("return");case 6:if(a.paymentInfo.name){e.next=8;break}return e.abrupt("return");case 8:E=!0,a.paymentInfo.expiry=new Date(a.paymentInfo.expiry),c(a.paymentInfo);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.target,l=r.id,i=r.value;new RegExp("[^".concat(a,"]+")).test(i);a&&new RegExp("[^".concat(a,"]+")).test(i)||(n&&(i=i.substr(0,n)),c(Object(v.a)({},t,Object(p.a)({},l,i))))}function h(){return(h=Object(d.a)(u.a.mark((function e(a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){return e.slice(-1)===(9*e.slice(0,-1).split("").reverse().map((function(e,a){return a%2?e:2*e>9?2*e-9:2*e})).reduce((function(e,a){return e+Number(a)}))).toString().slice(-1)},a.preventDefault(),r={name:t.name.length>4,number:16===t.number.length&&n(t.number),expiry:!!t.expiry,cvv:3===t.cvv.length},o({name:r.name?"is-valid":"is-invalid",number:r.number?"is-valid":"is-invalid",expiry:r.expiry?"is-valid":"is-invalid",cvv:r.cvv?"is-valid":"is-invalid"}),r.name&&r.number&&r.expiry&&r.cvv){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,fetch("/api/payment",{method:E?"put":"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}));case 8:if(e.sent.status){e.next=12;break}return alert("Sorry something went wrong"),e.abrupt("return");case 12:console.log("[saveForm] VALID, saving data: ",t),console.log("[setFormValid] data: ",r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){m.apply(this,arguments)}()}),[]),r.a.createElement("div",{class:"container"},r.a.createElement("h1",null,"Payment Details"),r.a.createElement("form",null,r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"name"},"Full Name"),r.a.createElement("input",{onChange:function(e){return f(e)},value:t.name,className:"form-control ".concat(s.name),id:"name",type:"text",placeholder:"Jane John Doe"}),"is-invalid"===s.name?r.a.createElement("small",{id:"nameHelp",class:"text-danger"},"Your name must be at least 4 characters long."):""),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"number"},"Credit Card Number"),r.a.createElement("input",{onChange:function(e){return f(e,"0-9",16)},value:t.number,className:"form-control ".concat(s.number),id:"number",type:"text",placeholder:"4500 0000 0000 0000"}),"is-invalid"===s.number?r.a.createElement("small",{id:"numberHelp",class:"text-danger"},"This must be a valid 16 digit credit card number"):""),r.a.createElement("div",{class:"form-row"},r.a.createElement("div",{class:"form-group col-6"},r.a.createElement("label",{for:"cardExpiry"},"Expiration"),r.a.createElement("div",{className:"form-control ".concat(s.expiry)},r.a.createElement(y.a,{onChange:function(e){c(Object(v.a)({},t,{expiry:e}))},value:t.expiry,id:"expiry",minDate:new Date,format:"yyyy-MMM"})),"is-invalid"===s.expiry?r.a.createElement("small",{id:"numberHelp",class:"text-danger"},"Please enter an expiry date!"):""),r.a.createElement("div",{class:"form-group col-6"},r.a.createElement("label",{for:"ccExpiry"},"CVV"),r.a.createElement("input",{onChange:function(e){return f(e,"0-9",3)},value:t.cvv,className:"form-control ".concat(s.cvv),id:"cvv",type:"text",placeholder:"999"}),"is-invalid"===s.cvv?r.a.createElement("small",{id:"numberHelp",class:"text-danger"},"Your number your card's CVV (on the back)"):"")),r.a.createElement("button",{onClick:function(e){return h.apply(this,arguments)},type:"button",class:"btn btn-primary"},"Save CC")))};var g=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,r.a.createElement("i",{class:"fas fa-shopping-cart fa-2x"})," Shopping Cart"),r.a.createElement("a",{href:"/payment",class:"btn btn-primary"},"Payment Details"))};var x=function(){return r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(o,null),r.a.createElement("div",{class:"container"},r.a.createElement(s.a,{exact:!0,path:["/","/shoppingcart"],component:g}),r.a.createElement(s.a,{exact:!0,path:"/payment",component:h}))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.68a48745.chunk.js.map