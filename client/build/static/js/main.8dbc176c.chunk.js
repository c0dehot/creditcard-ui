(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,a){e.exports=a(57)},36:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(16),i=a.n(c),l=(a(36),a(14)),s=a(8);var m=function(e){var t=Object(s.e)();return e.pathname&&(t={pathname:e.pathname}),r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(l.b,{to:"/",className:"navbar-brand"},r.a.createElement("i",{className:"fas fa-shopping-cart"})),r.a.createElement("div",{id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/shoppingcart",className:"/"===t.pathname||"/shoppingcart"===t.pathname?"nav-link active":"nav-link"},"Shopping Cart")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/payment",className:"/payment"===t.pathname?"nav-link active":"nav-link"},"Payment Details")))))},o=a(5),u=a.n(o),p=a(17),v=a(22),h=a(12),f=a(24),b=a(30),d=a.n(b);function y(){return(y=Object(h.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t).then((function(e){if(!e.ok)throw new Error("".concat(e.status,":").concat(e.statusText));return e.json()}));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),alert("Sorry we had a problem with the API: ".concat(e.t0.message)),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function E(){return(E=Object(h.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/payment",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),alert("Sorry we had a problem with the API: ".concat(e.t0.message)),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function g(){return(g=Object(h.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/payment",{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),alert("Sorry we had a problem with the API: ".concat(e.t0.message)),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var x={get:function(e){return y.apply(this,arguments)},post:function(e,t){return E.apply(this,arguments)},put:function(e,t){return g.apply(this,arguments)}},N=!1;var w=function(){var e=Object(n.useState)({name:"",number:"",expiry:"",cvv:""}),t=Object(f.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)({name:"",number:"",expiry:"",cvv:""}),l=Object(f.a)(i,2),s=l[0],m=l[1];function o(){return(o=Object(h.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/api/payment");case 2:if((t=e.sent)&&t.paymentInfo.name){e.next=5;break}return e.abrupt("return");case 5:N=!0,t.paymentInfo.expiry=new Date(t.paymentInfo.expiry),c(t.paymentInfo);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.target,i=r.id,l=r.value;t&&new RegExp("[^".concat(t,"]+")).test(l)||(n&&(l=l.substr(0,n)),c(Object(v.a)({},a,Object(p.a)({},i,l))))}function y(){return(y=Object(h.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){return e.slice(-1)===(9*e.slice(0,-1).split("").reverse().map((function(e,t){return t%2?e:2*e>9?2*e-9:2*e})).reduce((function(e,t){return e+Number(t)}))).toString().slice(-1)},t.preventDefault(),r={name:a.name.length>4,number:16===a.number.length&&n(a.number),expiry:!!a.expiry,cvv:3===a.cvv.length},m({name:r.name?"is-valid":"is-invalid",number:r.number?"is-valid":"is-invalid",expiry:r.expiry?"is-valid":"is-invalid",cvv:r.cvv?"is-valid":"is-invalid"}),r.name&&r.number&&r.expiry&&r.cvv){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,N?x.put("/api/payment",a):x.post("/api/payment",a);case 8:if(e.sent.status){e.next=12;break}return alert("Sorry something went wrong"),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){o.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Payment Details"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Full Name"),r.a.createElement("input",{onChange:function(e){return b(e)},value:a.name,className:"form-control ".concat(s.name),id:"name",type:"text",placeholder:"Jane John Doe"}),"is-invalid"===s.name?r.a.createElement("small",{id:"nameHelp",className:"text-danger"},"Your name must be at least 4 characters long."):""),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"number"},"Credit Card Number"),r.a.createElement("input",{onChange:function(e){return b(e,"0-9",16)},value:a.number,className:"form-control ".concat(s.number),id:"number",type:"text",placeholder:"4500 0000 0000 0000"}),"is-invalid"===s.number?r.a.createElement("small",{id:"numberHelp",className:"text-danger"},"This must be a valid 16 digit credit card number"):""),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-6"},r.a.createElement("label",{htmlFor:"cardExpiry"},"Expiration"),r.a.createElement("div",{className:"form-control ".concat(s.expiry)},r.a.createElement(d.a,{onChange:function(e){c(Object(v.a)({},a,{expiry:e}))},value:a.expiry,id:"expiry",minDate:new Date,format:"yyyy-MMM"})),"is-invalid"===s.expiry?r.a.createElement("small",{id:"numberHelp",className:"text-danger"},"Please enter an expiry date!"):""),r.a.createElement("div",{className:"form-group col-6"},r.a.createElement("label",{htmlFor:"ccCVV"},"CVV"),r.a.createElement("input",{onChange:function(e){return b(e,"0-9",3)},value:a.cvv,className:"form-control ".concat(s.cvv),id:"cvv",type:"text",placeholder:"999"}),"is-invalid"===s.cvv?r.a.createElement("small",{id:"cvvHelp",className:"text-danger"},"Your card's CVV is 3-digits and on the back"):"")),r.a.createElement("button",{onClick:function(e){return y.apply(this,arguments)},id:"saveBtn",type:"button",className:"btn btn-primary"},"Save CC")))};var j=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,r.a.createElement("i",{className:"fas fa-shopping-cart fa-2x"})," Shopping Cart"),r.a.createElement("a",{href:"/payment",className:"btn btn-primary"},"Payment Details"),"Successful Shopping Cart Page")};var C=function(){return r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(m,null),r.a.createElement("div",{className:"container"},r.a.createElement(s.a,{exact:!0,path:["/","/shoppingcart"],component:j}),r.a.createElement(s.a,{exact:!0,path:"/payment",component:w}))))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.8dbc176c.chunk.js.map