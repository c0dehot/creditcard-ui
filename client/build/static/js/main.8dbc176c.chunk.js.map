{"version":3,"sources":["components/NavBar.js","components/utils/api.js","components/PaymentPage.js","components/ShoppingCartPage.js","App.js","index.js"],"names":["NavBar","props","location","useLocation","pathname","className","to","id","url","a","fetch","then","result","ok","Error","status","statusText","json","alert","message","form","method","headers","body","JSON","stringify","get","post","put","priorPaymentInfoExists","PaymentPage","useState","name","number","expiry","cvv","setForm","inputClass","setInputClass","api","apiResult","paymentInfo","Date","handleInputChange","e","regex","len","target","value","RegExp","test","substr","luhnCheck","num","slice","split","reverse","map","digit","idx","reduce","t","n","Number","toString","preventDefault","chkForm","length","useEffect","loadPaymentDetails","htmlFor","onChange","type","placeholder","date","minDate","format","onClick","ShoppingCartPage","href","App","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8dbc176c.chunk.js","sourcesContent":["import React from 'react';\nimport { Link, useLocation } from \"react-router-dom\";\n\nfunction NavBar( props ) {\n    let location = useLocation();\n    if( props.pathname ) location = { pathname: props.pathname };\n    \n    return ( \n        <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\n        <Link to=\"/\" className=\"navbar-brand\">\n            <i className=\"fas fa-shopping-cart\"></i>\n        </Link>\n\n        <div id=\"navbarSupportedContent\">\n            <ul className=\"navbar-nav mr-auto\">\n            <li className=\"nav-item\">\n                <Link to=\"/shoppingcart\" className={location.pathname ==='/' || location.pathname === \"/shoppingcart\" ? \"nav-link active\" : \"nav-link\"}>\n                Shopping Cart\n                </Link>\n            </li>          \n            <li className=\"nav-item\">\n                <Link to=\"/payment\" className={location.pathname === \"/payment\" ? \"nav-link active\" : \"nav-link\"}>\n                Payment Details\n                </Link>\n            </li> \n            </ul>\n        </div>\n        </nav>\n    );\n}\n\nexport default NavBar;","async function get( url ){\n    try{ \n        return await fetch( url )\n            .then( (result) =>{ \n                if( !result.ok ) \n                    throw new Error(`${result.status}:${result.statusText}`);\n\n                return result.json()\n            });\n    } catch( e ){\n        // catch our server error and other possible ajax errors (timeout, etc)\n        // console.log( `[error] Error with our fetch`, e.message );\n        alert( `Sorry we had a problem with the API: ${e.message}` );\n        return false;\n    }\n}\n\nasync function post( url, form ){\n    try{ \n        return await fetch( '/api/payment',\n            {   method: 'post',\n                headers: {\n                    'Accept': 'application/json, text/plain, */*',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(form)\n            }\n        ).then( result=>result.json() );\n    } catch( e ){\n        // catch our server error and other possible ajax errors (timeout, etc)\n        // console.log( `[error] Error with our fetch`, e.message );\n        alert( `Sorry we had a problem with the API: ${e.message}` );\n        return false;\n    }        \n}\n\nasync function put( url, form ){\n    try{ \n        return await fetch( '/api/payment',\n            {   method: 'put',\n                headers: {\n                    'Accept': 'application/json, text/plain, */*',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(form)\n            }\n        ).then( result=>result.json() );\n    } catch( e ){\n        // catch our server error and other possible ajax errors (timeout, etc)\n        // console.log( `[error] Error with our fetch`, e.message );\n        alert( `Sorry we had a problem with the API: ${e.message}` );\n        return false;\n    }        \n}\n\nexport default { get, post, put }","import React, { useState, useEffect } from \"react\";\nimport DatePicker from 'react-date-picker';\nimport api from './utils/api';\n\nlet priorPaymentInfoExists = false;\n\nfunction PaymentPage(){\n    const [ form, setForm ]= useState( { name: '', number: '', expiry: '', cvv: '' } )\n    const [ inputClass, setInputClass ] = useState( { name: '', number: '', expiry: '', cvv: '' } )\n\n    // on component load (ex. componentDidMount)\n    useEffect( function(){\n        loadPaymentDetails();\n    }, [] );\n\n    async function loadPaymentDetails(){\n        const apiResult = await api.get( '/api/payment' );\n        if( !apiResult || !apiResult.paymentInfo.name )\n            return;\n\n        priorPaymentInfoExists = true;\n\n        // convert date from string to date-object\n        apiResult.paymentInfo.expiry = new Date( apiResult.paymentInfo.expiry );\n        setForm( apiResult.paymentInfo );\n    }\n\n    function handleInputChange( e, regex='', len=0 ){\n        let { id, value } = e.target\n        if( regex && new RegExp(`[^${regex}]+`).test(value) )\n            return;\n        // truncate to the length \n        if( len )\n            value = value.substr(0,len);\n            \n        setForm( { ...form, [id]: value } )\n    }\n\n    function updateDate( date ){\n        setForm( { ...form, expiry: date } );\n    }\n\n    async function saveForm(e){\n        e.preventDefault();\n\n        // simple luhn checker (boolean)\n        function luhnCheck( num ){\n            const chkDigit = num.slice(-1);\n            const luhn = num.slice(0,-1).split('').reverse()\n                .map( (digit,idx)=>( idx%2 ? digit : digit*2>9 ? digit*2-9 : digit*2 ) )\n                .reduce( (t,n)=>t+Number(n) )*9;\n            return chkDigit===luhn.toString().slice(-1)\n        }\n            \n        const chkForm = {\n            name: form.name.length>4,\n            number: form.number.length===16 && luhnCheck( form.number ),\n            expiry: form.expiry ? true : false,\n            cvv: form.cvv.length===3\n        }\n        // update input class set\n        setInputClass( {\n            name: chkForm.name ? 'is-valid' : 'is-invalid',\n            number: chkForm.number ? 'is-valid' : 'is-invalid',\n            expiry: chkForm.expiry ? 'is-valid' : 'is-invalid',\n            cvv: chkForm.cvv ? 'is-valid' : 'is-invalid'\n        })\n\n        if( !(chkForm.name && chkForm.number && chkForm.expiry && chkForm.cvv ) )\n            return;\n\n        // save & notify the user\n        const apiResult = await (priorPaymentInfoExists ? \n            api.put( '/api/payment', form ): api.post( '/api/payment', form ) );\n\n        if( !apiResult.status ){\n            alert( 'Sorry something went wrong' );\n            return;\n        }\n    \n        // console.log( `[saveForm] VALID, saving data: `, form )\n        // console.log( `[setFormValid] data: `, chkForm )\n    }\n    return (\n        <div className='container'>\n            <h1>Payment Details</h1>\n\n            <form>\n                <div className=\"form-group\">\n                    <label htmlFor=\"name\">Full Name</label>\n                    <input onChange={(e)=>handleInputChange(e)} value={form.name} className={`form-control ${inputClass.name}`} id=\"name\" type=\"text\" placeholder=\"Jane John Doe\" />\n                    { inputClass.name==='is-invalid' ?\n                    <small id=\"nameHelp\" className=\"text-danger\">\n                        Your name must be at least 4 characters long.\n                    </small> : ''}\n                </div>\n                <div className=\"form-group\">\n                    <label htmlFor=\"number\">Credit Card Number</label>\n                    <input onChange={(e)=>handleInputChange(e,'0-9',16)} value={form.number} className={`form-control ${inputClass.number}`} id=\"number\" type=\"text\" placeholder=\"4500 0000 0000 0000\" />\n                    { inputClass.number==='is-invalid' ?\n                    <small id=\"numberHelp\" className=\"text-danger\">\n                        This must be a valid 16 digit credit card number\n                    </small> : ''}\n                </div>\n                <div className=\"form-row\">\n                    <div className=\"form-group col-6\">\n                        <label htmlFor=\"cardExpiry\">Expiration</label>\n                        <div className={`form-control ${inputClass.expiry}`}>\n                            <DatePicker onChange={updateDate} value={form.expiry} id=\"expiry\" minDate={new Date()} format='yyyy-MMM' />\n                        </div>\n                        { inputClass.expiry==='is-invalid' ?\n                        <small id=\"numberHelp\" className=\"text-danger\">\n                            Please enter an expiry date!\n                        </small> : ''}\n                    </div>\n                  \n                    <div className=\"form-group col-6\">\n                        <label htmlFor=\"ccCVV\">CVV</label>\n                        <input onChange={(e)=>handleInputChange(e,'0-9',3)} value={form.cvv} className={`form-control ${inputClass.cvv}`} id=\"cvv\" type=\"text\" placeholder=\"999\" />\n                        { inputClass.cvv==='is-invalid' ?\n                         <small id=\"cvvHelp\" className=\"text-danger\">\n                            Your card's CVV is 3-digits and on the back\n                        </small> : ''}\n                    </div>\n                                     \n                </div>\n                <button onClick={saveForm} id='saveBtn' type=\"button\" className=\"btn btn-primary\">Save CC</button>\n            </form>\n        </div>\n    )\n}\n\nexport default PaymentPage;","import React from \"react\";\n\nfunction ShoppingCartPage(){\n    return (\n        <div>\n              <h1><i className=\"fas fa-shopping-cart fa-2x\"></i> Shopping Cart</h1>\n              \n              <a href='/payment' className=\"btn btn-primary\">Payment Details</a>\n\n              Successful Shopping Cart Page\n        </div>\n    )\n}\n\nexport default ShoppingCartPage;","import React from 'react';\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n// import { GlobalStore } from \"./components/GlobalStore\";\nimport NavBar from './components/NavBar';\nimport PaymentPage from './components/PaymentPage';\nimport ShoppingCartPage from './components/ShoppingCartPage';\n\nfunction App() {\n  return (\n      <Router>\n      <div className=\"App\">\n          <NavBar />\n          <div className=\"container\">\n            <Route exact path={[\"/\",\"/shoppingcart\"]} component={ShoppingCartPage} />\n            <Route exact path=\"/payment\" component={PaymentPage} />\n            </div>\n      </div>\n      </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}